{"version":3,"sources":["assets\\scripts\\lx.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AACM,IAAA,KAAwB,EAAE,CAAC,UAAU,EAAnC,OAAO,aAAA,EAAE,QAAQ,cAAkB,CAAC;AAC5C,aAAa;AAEb;IAAsC,4BAAY;IAAlD;QAAA,qEAgFC;QA9EG,SAAG,GAAY,IAAI,CAAC,CAAC,KAAK;QAC1B,WAAK,GAAW,IAAI,CAAA,CAAC,QAAQ;QAC7B,YAAM,GAAY,IAAI,CAAC,CAAE,MAAM;QAG/B,WAAK,GAAW,GAAG,CAAC,CAAC,QAAQ;QAE7B,UAAI,GAAW,CAAC,CAAC,CAAE,OAAO;QAC1B,UAAI,GAAW,CAAC,CAAC,CAAE,OAAO;;IAsE9B,CAAC;IAlEG,yBAAM,GAAN;QACI,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,SAAS;QAC3C,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC,CAAE,UAAU;QAC7C,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,QAAQ;QAChD,IAAI,CAAC,IAAI,GAAG,QAAQ,CAAC,CAAC,MAAM;IAChC,CAAC;IAED,2BAAQ,GAAR;QACI,WAAW;QACX,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;QAC3B,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC;QACd,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC;IAClB,CAAC;IACD,OAAO;IACP,4BAAS,GAAT,UAAU,GAAG;QACT,IAAI,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC;QACjD,IAAI,IAAI,CAAC,IAAI,IAAI,GAAG;YAAE,OAAO;QAC7B,IAAI,CAAC,IAAI,GAAG,GAAG,CAAC;QAChB,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;IAClB,CAAC;IACD,wBAAK,GAAL;QAAA,iBAsCC;QArCG,IAAI,GAAG,GAAG,QAAQ,CAAC;QACnB,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,UAAU,EAAE,UAAC,CAAsB;YAC7D,IAAI,GAAG,GAAG,KAAI,CAAC,IAAI,CAAC,oBAAoB,CAAC,CAAC,CAAC,WAAW,EAAE,CAAC,CAAA,CAAC,QAAQ;YAClE,6BAA6B;YAC7B,IAAI,IAAI,GAAG,GAAG,CAAC,GAAG,EAAE,CAAC,CAAC,QAAQ;YAC9B,IAAI,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,KAAI,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,SAAS;YAEpD,KAAI,CAAC,IAAI,GAAG,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC;YACzB,KAAI,CAAC,IAAI,GAAG,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC;YACzB,IAAI,IAAI,GAAG,KAAI,CAAC,KAAK,EAAE;gBACnB,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,IAAI,GAAG,KAAI,CAAC,KAAK,CAAC;gBAClC,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,IAAI,GAAG,KAAI,CAAC,KAAK,CAAC;aACrC;YACD,KAAI,CAAC,GAAG,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC,CAAC,UAAU;YAErC,WAAW;YACX,IAAI,KAAI,CAAC,IAAI,GAAG,CAAC,EAAE;gBACf,KAAI,CAAC,MAAM,CAAC,MAAM,GAAG,MAAM,CAAA;gBAC3B,GAAG,GAAG,OAAO,CAAC;aACjB;iBAAM,IAAI,KAAI,CAAC,IAAI,GAAG,CAAC,EAAE;gBACtB,KAAI,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,MAAM,CAAA;gBAC5B,GAAG,GAAG,OAAO,CAAC;aACjB;YACD,KAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;QACxB,CAAC,CAAC,CAAA;QACF,OAAO;QACP,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,SAAS,EAAE,UAAC,CAAW;YACjD,KAAI,CAAC,QAAQ,EAAE,CAAC;YAChB,GAAG,GAAG,QAAQ,CAAC;YACf,KAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;QACxB,CAAC,CAAC,CAAA;QACF,OAAO;QACP,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,YAAY,EAAE,UAAC,CAAuB;YAChE,KAAI,CAAC,QAAQ,EAAE,CAAC;YAChB,GAAG,GAAG,QAAQ,CAAC;YACf,KAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;QACxB,CAAC,CAAC,CAAA;IACN,CAAC;IAED,yBAAM,GAAN,UAAO,EAAE;QACL,IAAI,EAAE,GAAG,CAAC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC;QACvC,IAAI,EAAE,GAAG,CAAC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC;QACvC,IAAI,CAAC,MAAM,CAAC,CAAC,IAAI,EAAE,CAAC;QACpB,IAAI,CAAC,MAAM,CAAC,CAAC,IAAI,EAAE,CAAC;IACxB,CAAC;IAxED;QADC,QAAQ;2CACW;IAPH,QAAQ;QAD5B,OAAO;OACa,QAAQ,CAgF5B;IAAD,eAAC;CAhFD,AAgFC,CAhFqC,EAAE,CAAC,SAAS,GAgFjD;kBAhFoB,QAAQ","file":"","sourceRoot":"/","sourcesContent":["\nconst { ccclass, property } = cc._decorator;\n// ts自写轮盘操作方法\n@ccclass\nexport default class NewClass extends cc.Component {\n\n    but: cc.Node = null; //子节点\n    fSize: number = null //当前节点大小\n    zhujue: cc.Node = null;  //控制节点\n\n    @property\n    speed: number = 200; //目标移动速度\n\n    dirX: number = 0;  //向量x坐标\n    dirY: number = 0;  //向量y坐标\n\n    anim: string;  //默认的动画\n\n    onLoad() {\n        this.but = this.node.children[0]; //获取子节点触碰\n        this.fSize = this.node.width / 2;  //获取当前节点半径\n        this.zhujue = cc.find('Canvas/zhujue'); //获取目标节点\n        this.anim = 'zhujue'; //默认动画\n    }\n\n    endReset() {\n        // 初始化位置 向量\n        this.but.setPosition(0, 0);\n        this.dirX = 0;\n        this.dirY = 0;\n    }\n    // 动画方法\n    animation(ani) {\n        let amt = this.zhujue.getComponent(cc.Animation);\n        if (this.anim == ani) return;\n        this.anim = ani;\n        amt.play(ani);\n    }\n    start() {\n        let ani = 'zhujue';\n        this.but.on(cc.Node.EventType.TOUCH_MOVE, (e: cc.Event.EventMouse) => {\n            let fbg = this.node.convertToNodeSpaceAR(e.getLocation()) //坐标转化节点\n            // console.log(fbg.x, fbg.y);\n            let leng = fbg.mag(); //获取向量长度\n            let scaleX = Math.abs(this.zhujue.scaleX); //获取缩放绝对值\n\n            this.dirX = fbg.x / leng;\n            this.dirY = fbg.y / leng;\n            if (leng > this.fSize) {\n                fbg.x = fbg.x / leng * this.fSize;\n                fbg.y = fbg.y / leng * this.fSize;\n            }\n            this.but.setPosition(fbg); //坐标赋值给子节点\n\n            // 角色位移方向变化\n            if (this.dirX > 0) {\n                this.zhujue.scaleX = scaleX\n                ani = \"paobu\";\n            } else if (this.dirX < 0) {\n                this.zhujue.scaleX = -scaleX\n                ani = \"paobu\";\n            }\n            this.animation(ani);\n        })\n        // 重置轮盘\n        this.but.on(cc.Node.EventType.TOUCH_END, (e: cc.Event) => {\n            this.endReset();\n            ani = 'zhujue';\n            this.animation(ani);\n        })\n        // 重置轮盘\n        this.but.on(cc.Node.EventType.TOUCH_CANCEL, (e: cc.Event.EventCustom) => {\n            this.endReset();\n            ani = 'zhujue';\n            this.animation(ani);\n        })\n    }\n\n    update(dt) {\n        let _x = (this.speed * this.dirX) * dt;\n        let _y = (this.speed * this.dirY) * dt;\n        this.zhujue.x += _x;\n        this.zhujue.y += _y;\n    }\n}\n"]}